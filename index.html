<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LatteTyper | v0.6.9 Audio Update</title>
    <style>
        :root {
            --bg: #fdf6f0; --espresso: #3d2622; --latte: #f5ebe0;
            --accent: #d4a373; --text: #3d2622; --danger: #e63946;
        }

        body {
            margin: 0; background-color: var(--bg); color: var(--text);
            font-family: 'Courier New', monospace; height: 100vh;
            display: flex; align-items: center; justify-content: center; overflow: hidden;
        }

        /* --- BUTTON ANIMATIONS --- */
        button, select { 
            background: var(--espresso); color: white; border: none; 
            padding: 12px 20px; margin: 8px; cursor: pointer; 
            font-family: inherit; font-weight: bold; width: 80%;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), background 0.1s;
        }

        /* Size up on hover, don't change color */
        button:hover {
            transform: scale(1.1);
        }

        /* Only change color when clicked (active) */
        button:active {
            background: var(--accent);
            transform: scale(0.95);
        }

        .screen { 
            display: none; width: 90%; max-width: 500px; text-align: center;
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 15px 15px 0px var(--accent); border: 2px solid var(--espresso);
        }
        .active { display: block; }

        #input-area { width: 100%; border: none; border-bottom: 2px solid var(--espresso); font-size: 22px; padding: 10px 0; outline: none; background: transparent; color: var(--text); }
        .progress-container { width: 100%; height: 15px; background: #eee; border-radius: 5px; overflow: hidden; margin: 10px 0; }
        #game-bar { height: 100%; width: 0%; transition: width 0.1s; }
    </style>
</head>
<body>

    <div id="screen-start" class="screen active">
        <h1>â˜• LatteTyper</h1>
        <button onclick="playSFX('click'); nav('game')">START</button>
        <button onclick="playSFX('click'); nav('customize')">CUSTOMIZE</button>
    </div>

    <div id="screen-customize" class="screen">
        <h2>Settings</h2>
        <p>BGM Volume:</p>
        <input type="range" min="0" max="1" step="0.1" value="0.5" onchange="updateVolume(this.value)">
        <button onclick="playSFX('click'); nav('start')">BACK</button>
    </div>

    <div id="screen-game" class="screen">
        <div class="stats">WPM: <span id="wpm-val">0</span></div>
        <div id="order-box" style="padding: 20px; background: #f9f9f9; margin: 15px 0;">Wait...</div>
        <input type="text" id="input-area" placeholder="Type here..." autocomplete="off">
        <div class="progress-container"><div id="game-bar" style="background:var(--accent);"></div></div>
    </div>

    <script>
        // --- AUDIO ENGINE ---
        const sounds = {
            click: new Audio('assets/click.mp3'),
            ding: new Audio('assets/ding.mp3'),
            error: new Audio('assets/error.mp3'),
            bgm: new Audio('assets/lofi-beat.mp3')
        };

        sounds.bgm.loop = true;

        function playSFX(name) {
            sounds[name].currentTime = 0;
            sounds[name].play().catch(e => console.log("Audio needs user interaction first"));
        }

        function updateVolume(val) {
            sounds.bgm.volume = val;
        }

        // --- NAVIGATION ---
        function nav(target) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-' + target).classList.add('active');
            
            if(target === 'game') {
                sounds.bgm.play();
                startGame();
            }
        }

        // --- GAME LOGIC ---
        let currentOrder = "Triple espresso.", gameActive = false, totalChars = 0, startTime;

        function startGame() {
            gameActive = true; totalChars = 0; startTime = new Date();
            nextOrder();
        }

        function nextOrder() {
            currentOrder = "Double shot latte.";
            document.getElementById('order-box').innerText = currentOrder;
            document.getElementById('input-area').value = "";
        }

        document.getElementById('input-area').addEventListener('input', (e) => {
            if(!gameActive) return;
            const val = e.target.value;

            // SFX on correct typing
            if(val === currentOrder.substring(0, val.length)) {
                // playSFX('click'); // Optional: click sound for every key
            } else {
                playSFX('error');
            }

            if(val === currentOrder) {
                playSFX('ding');
                totalChars += currentOrder.length;
                nextOrder();
            }
        });
    </script>
</body>
</html>
